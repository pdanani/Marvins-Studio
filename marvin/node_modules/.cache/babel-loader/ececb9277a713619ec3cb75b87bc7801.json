{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/pawan/Desktop/Marvins-Studio/marvin/src/components/player/Player.js\";\nimport React from 'react';\nimport logo from '../../icons/marvins.png';\nimport ReactPlayer from 'react-player';\nimport * as Icon from 'react-bootstrap-icons';\nimport Duration from './Duration';\nimport prevButton from '../../icons/prev.png';\nimport playButton from '../../icons/play.png';\nimport pauseButton from '../../icons/pause.png';\nimport nextButton from '../../icons/next.png';\nimport shuffleButton from '../../icons/shuffle.png';\nimport queueButton from '../../icons/playlist.png';\n\nclass Player extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      playing: false,\n      seeking: false,\n      played: 0,\n      songs: []\n    };\n\n    this.ref = player => {\n      this.player = player;\n    };\n\n    this.handlePlayPause = () => {\n      if (this.state.loaded < 0.01 && this.state.playing) // Fixes issue of song still playing even when paused in beginning\n        return;else this.setState({\n        playing: !this.state.playing\n      });\n    };\n\n    this.handleSeekMouseDown = e => {\n      console.log(\"mousedown\");\n      this.setState({\n        seeking: true\n      });\n    };\n\n    this.handleSeekMouseUp = e => {\n      this.setState({\n        seeking: false\n      });\n      this.player.seekTo(parseFloat(e.target.value));\n    };\n\n    this.handleSeekChange = e => {\n      this.setState({\n        played: parseFloat(e.target.value)\n      });\n    };\n\n    this.handleProgress = state => {\n      //console.log('onProgress', state)\n      // We only want to update time slider if we are not currently seeking\n      if (!this.state.seeking) {\n        this.setState(state);\n      }\n    };\n\n    this.handleDuration = duration => {\n      console.log('onDuration', duration);\n      this.setState({\n        duration\n      });\n    };\n\n    this.handlePrevSongP = played => {\n      let x = this.props.handlePrevSong(played);\n      if (x == 0) this.player.seekTo(parseFloat(0));\n    };\n\n    this.handleNextSongP = () => {\n      let x = this.props.handleNextSong(); // if (x == 0) {\n      //     this.setState({playing: false});\n      //     console.log(this.state.playing);\n      //     this.player.seekTo(parseFloat(0));\n      //     this.setState({played: 0});\n      // }\n\n      this.player.seekTo(parseFloat(0));\n      this.setState({\n        played: 0,\n        loaded: 0\n      }, () => {\n        if (x == 0) {\n          this.setState({\n            playing: false\n          });\n          console.log(\"setting playing to false\");\n        }\n      }); // Also fixes issue of song still playing even when paused in beginning\n    };\n\n    this.handleShowHideQueue = () => {\n      if (this.props.showQueue) this.props.handleCloseQueue();else this.props.handleShowQueue();\n    };\n\n    this.componentDidUpdate = prevProps => {\n      // If a new song is pressed, automatically start playing the song\n      if (prevProps.songs[0] != this.props.songs[0]) this.setState({\n        playing: true,\n        played: 0,\n        loaded: 0\n      });\n    };\n  }\n\n  render() {\n    let playerDisabled = this.state.currSong == null; //console.log(\"playing is \", this.state.playing);\n\n    const playing = this.state.playing,\n          seeking = this.state.seeking,\n          played = this.state.played,\n          duration = this.state.duration;\n    let shuffle = this.props.shuffle;\n    let songs = shuffle ? this.props.shuffled : this.props.songs,\n        song,\n        index = shuffle ? this.props.shuffled_index : this.props.index;\n    if (songs[0] != undefined) song = \"https://www.youtube.com/watch?v=\" + songs[index].song.videoId;\n    if (played >= 1) this.handleNextSongP();\n    let buttonCursor = playing ? \"pointer\" : \"disabled\";\n    return songs[index] ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row w-100 pl-5 pt-2 display-inherit player\",\n      style: {\n        height: 80,\n        bottom: 0,\n        left: 0,\n        zIndex: 99,\n        background: '#323232',\n        border: 'solid',\n        borderTopWidth: 1,\n        borderBottomWidth: 0,\n        borderLeftWidth: 0,\n        borderRightWidth: 0,\n        borderColor: '#525252'\n      },\n      children: [/*#__PURE__*/_jsxDEV(ReactPlayer, {\n        width: \"0%\",\n        height: \"0%\",\n        url: song,\n        ref: this.ref,\n        playing: playing,\n        onProgress: this.handleProgress,\n        onDuration: this.handleDuration,\n        onReady: () => console.log('onReady'),\n        seeking: seeking,\n        ref: this.ref\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"mr-3\",\n        src: songs[index].song.albumArt,\n        style: {\n          height: 60,\n          width: 60\n        },\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mr-1 text-white text-truncate\",\n        style: {\n          width: '10%'\n        },\n        children: [songs[index].song.title, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-white\",\n          children: /*#__PURE__*/_jsxDEV(\"small\", {\n            children: [\"by \", songs[index].song.artistName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"prev\",\n        className: \"btn btn-outline-primary border-0 mr-2\",\n        style: {\n          cursor: buttonCursor\n        },\n        onClick: this.handlePrevSongP.bind(this, played),\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: prevButton,\n          style: {\n            height: 25\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"playPause\",\n        className: \"btn btn-outline-primary border-0 mr-2\",\n        style: {\n          cursor: buttonCursor\n        },\n        onClick: this.handlePlayPause,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: this.state.playing ? pauseButton : playButton,\n          style: {\n            height: 25\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"next\",\n        className: \"btn btn-outline-primary border-0 mr-3\",\n        style: {\n          cursor: buttonCursor\n        },\n        onClick: this.handleNextSongP.bind(),\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: nextButton,\n          style: {\n            height: 25\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Duration, {\n        className: \"text-light  mr-2 mt-4 text-center\",\n        seconds: duration * played != NaN ? duration * played : 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"seek\",\n        type: \"range\",\n        min: 0,\n        max: 0.999999,\n        step: \"any\",\n        className: \"mr-2 w-50\",\n        onMouseDown: this.handleSeekMouseDown,\n        value: played,\n        onChange: this.handleSeekChange,\n        onMouseUp: this.handleSeekMouseUp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"shuffle\",\n        className: \"btn btn-outline-primary border-0 ml-auto\",\n        style: {\n          cursor: buttonCursor\n        },\n        onClick: this.props.handleToggleShuffle,\n        children: /*#__PURE__*/_jsxDEV(Icon.Shuffle, {\n          color: shuffle ? \"#3d8af7\" : \"white\",\n          size: 30\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"queue\",\n        className: \"btn btn-outline-primary border-0 ml-3 mr-4 mt-1\",\n        style: {\n          cursor: buttonCursor\n        },\n        onClick: this.handleShowHideQueue,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: queueButton,\n          style: {\n            height: 35\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nexport default Player;","map":{"version":3,"sources":["/Users/pawan/Desktop/Marvins-Studio/marvin/src/components/player/Player.js"],"names":["React","logo","ReactPlayer","Icon","Duration","prevButton","playButton","pauseButton","nextButton","shuffleButton","queueButton","Player","Component","state","playing","seeking","played","songs","ref","player","handlePlayPause","loaded","setState","handleSeekMouseDown","e","console","log","handleSeekMouseUp","seekTo","parseFloat","target","value","handleSeekChange","handleProgress","handleDuration","duration","handlePrevSongP","x","props","handlePrevSong","handleNextSongP","handleNextSong","handleShowHideQueue","showQueue","handleCloseQueue","handleShowQueue","componentDidUpdate","prevProps","render","playerDisabled","currSong","shuffle","shuffled","song","index","shuffled_index","undefined","videoId","buttonCursor","height","bottom","left","zIndex","background","border","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","borderColor","albumArt","width","title","artistName","cursor","bind","NaN","handleToggleShuffle"],"mappings":"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","sourcesContent":["import React from 'react'\nimport logo from '../../icons/marvins.png';\nimport ReactPlayer from 'react-player';\nimport * as Icon from 'react-bootstrap-icons'\n\nimport Duration from './Duration'\nimport prevButton from '../../icons/prev.png'\nimport playButton from '../../icons/play.png'\nimport pauseButton from '../../icons/pause.png'\nimport nextButton from '../../icons/next.png'\nimport shuffleButton from '../../icons/shuffle.png'\nimport queueButton from '../../icons/playlist.png'\n\n\nclass Player extends React.Component {\n    state = {\n        playing: false,\n        seeking: false,\n        played: 0,\n        songs: []\n    }\n\n    ref = player => {\n        this.player = player\n    }\n\n    handlePlayPause = () => {\n        if (this.state.loaded < 0.01 && this.state.playing) // Fixes issue of song still playing even when paused in beginning\n            return;\n        else\n            this.setState({ playing: !this.state.playing });\n    }\n\n    handleSeekMouseDown = e => {\n        console.log(\"mousedown\");\n        this.setState({ seeking: true })\n    }\n    \n    handleSeekMouseUp = e => {\n        this.setState({ seeking: false })\n        this.player.seekTo(parseFloat(e.target.value))\n    }\n\n    handleSeekChange = e => {\n        this.setState({ played: parseFloat(e.target.value) })\n    }\n\n    handleProgress = state => {\n        //console.log('onProgress', state)\n        // We only want to update time slider if we are not currently seeking\n        if (!this.state.seeking) {\n          this.setState(state)\n        }\n    } \n\n    handleDuration = (duration) => {\n        console.log('onDuration', duration)\n        this.setState({ duration })\n    }\n\n    handlePrevSongP = (played) => {\n        let x = this.props.handlePrevSong(played);\n        if (x == 0) \n            this.player.seekTo(parseFloat(0));\n        \n    }\n\n    handleNextSongP = () => {\n        let x = this.props.handleNextSong();\n        // if (x == 0) {\n        //     this.setState({playing: false});\n        //     console.log(this.state.playing);\n        //     this.player.seekTo(parseFloat(0));\n        //     this.setState({played: 0});\n        // }\n        this.player.seekTo(parseFloat(0));\n        this.setState({played: 0, loaded: 0} ,() => {\n            if (x == 0) {\n                this.setState({playing: false});\n                console.log(\"setting playing to false\");\n            }\n        }); // Also fixes issue of song still playing even when paused in beginning\n\n    }\n\n    handleShowHideQueue = () => {\n        if (this.props.showQueue)\n            this.props.handleCloseQueue();\n        else\n            this.props.handleShowQueue();\n    }\n\n    componentDidUpdate = (prevProps) => {\n        // If a new song is pressed, automatically start playing the song\n        if (prevProps.songs[0] != this.props.songs[0])\n            this.setState({playing: true, played: 0, loaded: 0}); \n    }\n\n    render () {\n        let playerDisabled = this.state.currSong == null;\n        //console.log(\"playing is \", this.state.playing);\n        \n        const playing = this.state.playing, seeking = this.state.seeking, played = this.state.played, duration = this.state.duration;\n        let shuffle = this.props.shuffle;\n        let songs = shuffle?this.props.shuffled:this.props.songs, song, index = shuffle?this.props.shuffled_index:this.props.index;\n        if (songs[0] != undefined)\n            song = \"https://www.youtube.com/watch?v=\" + songs[index].song.videoId;\n        if (played >= 1)\n            this.handleNextSongP();\n        let buttonCursor = playing ? \"pointer\" : \"disabled\"\n        return (\n            songs[index] ?\n                <div className=\"row w-100 pl-5 pt-2 display-inherit player\"\n                        style={{height: 80, bottom: 0, left: 0, zIndex: 99, background: '#323232', border:'solid', borderTopWidth:1, borderBottomWidth:0, borderLeftWidth: 0, borderRightWidth: 0,  borderColor: '#525252'}}>\n                    <ReactPlayer width='0%' height='0%' url={song} ref={this.ref}\n                        playing={playing}\n                        onProgress={this.handleProgress}\n                        onDuration={this.handleDuration}\n                        onReady={() => console.log('onReady')}\n                        seeking={seeking} ref={this.ref}/>\n                    <img className='mr-3' src={songs[index].song.albumArt} style={{height: 60, width: 60}} alt=''></img>\n                    <div className='mr-1 text-white text-truncate'style={{width: '10%'}}>{songs[index].song.title}\n                        <div className='text-white'><small>by {songs[index].song.artistName}</small></div>\n                    </div>\n                    <button id=\"prev\" className='btn btn-outline-primary border-0 mr-2'\n                            style={{cursor: buttonCursor}} onClick={this.handlePrevSongP.bind(this, played)}>\n                        <img src={prevButton} style={{ height: 25 }}/>\n                    </button>\n\n                    <button id=\"playPause\" className='btn btn-outline-primary border-0 mr-2'\n                            style={{cursor: buttonCursor}} onClick={this.handlePlayPause}>\n                        <img src={this.state.playing ? pauseButton : playButton} style={{ height: 25 }}/>\n                    </button>\n\n                    <button id=\"next\" className='btn btn-outline-primary border-0 mr-3'\n                            style={{cursor: buttonCursor}} onClick={this.handleNextSongP.bind()}>\n                        <img src={nextButton} style={{ height: 25 }}/>\n                    </button>\n                    <Duration className=\"text-light  mr-2 mt-4 text-center\" seconds={(duration * played)!= NaN ? (duration * played) : 0 } />\n                    \n                    <input id=\"seek\" type='range' min={0} max={0.999999} step='any' className='mr-2 w-50'\n                        onMouseDown={this.handleSeekMouseDown} value={played}\n                        onChange={this.handleSeekChange}\n                        onMouseUp={this.handleSeekMouseUp}\n                    />\n                    <button id='shuffle' className='btn btn-outline-primary border-0 ml-auto'\n                            style={{cursor: buttonCursor}} onClick={this.props.handleToggleShuffle}>\n                        <Icon.Shuffle color={shuffle?\"#3d8af7\":\"white\"}size={30} />\n                    </button>\n                    \n                    <button id='queue' className='btn btn-outline-primary border-0 ml-3 mr-4 mt-1'\n                            style={{cursor: buttonCursor}} onClick={this.handleShowHideQueue}>\n                        <img src={queueButton} style={{ height: 35 }}/>\n                    </button> \n                </div> :\n                <div/>\n            \n        )\n    }\n}\n\nexport default Player"]},"metadata":{},"sourceType":"module"}